(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{128:function(e,t){},166:function(e,t){},171:function(e,t,n){},175:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(64),o=n.n(i),s=(n(73),n(67)),c=n(7),l=n.n(c),u=n(27),h=n(22),f=n(23),p=n(25),m=n(24),d=n(26),v=n(4),w=n(65),g=n.n(w),k=n(66),b=function(e){return r.a.createElement("svg",Object.assign({height:24,viewBox:"0 0 24 24",width:24},e),r.a.createElement("path",{fill:"currentColor",d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))},y=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={query:""},n.openQwant=n.openQwant.bind(Object(v.a)(Object(v.a)(n))),n.handleKeyPress=n.handleKeyPress.bind(Object(v.a)(Object(v.a)(n))),n.inputRef=r.a.createRef(),n}return Object(d.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.inputRef.current.focus()}},{key:"openQwant",value:function(){window.open("https://www.qwant.com/?q="+this.state.query)}},{key:"handleKeyPress",value:function(e){"Enter"===e.key&&(this.props.onSearch&&this.props.onSearch(this.state.query),this.openQwant())}},{key:"render",value:function(){var e=this;return r.a.createElement(k.a,{onStateChange:function(t){var n=t.inputValue;return n&&e.setState({query:n})},selectedItem:this.state.query,render:function(t){var n=t.getInputProps,a=t.getItemProps,i=t.isOpen,o=t.inputValue,s=t.highlightedIndex,c=t.selectedItem;return r.a.createElement("div",{className:"SearchBar"},r.a.createElement("div",null,r.a.createElement("input",Object.assign({},n({onKeyUp:e.handleKeyPress}),{className:"input",ref:e.inputRef,placeholder:"What are you looking for?"})),r.a.createElement(b,{onClick:e.openQwant,className:"icon"})),i&&r.a.createElement("div",{className:"downshift"},e.props.items.filter(function(e){return!o||e.includes(o)}).map(function(e,t){return r.a.createElement("div",Object.assign({className:"downshiftRow"},a({key:t,index:t,item:e,style:{backgroundColor:s===t?"lightgray":"white",fontWeight:c===e?"bold":"normal"}})),e)})))}})}}]),t}(r.a.Component),q=function(e){var t=e.profiles,n=e.onClick;return r.a.createElement("div",{className:"Profiles"},t.map(function(e){return r.a.createElement("span",{className:"profile",key:e.id,onClick:function(){return n(e)}},r.a.createElement("img",{src:e.image,alt:e.username}),r.a.createElement("span",{key:e.id},e.username))}))},j=(n(171),{name:"Qwant Search",description:"Qwant search engine",image:"https://qwant.com/img/v4/home-banner.svg?1542966874062"}),O=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).state={link:"#",items:[],profiles:[]},n.masq=null,n.onSearch=n.onSearch.bind(Object(v.a)(Object(v.a)(n))),n.handleClickProfile=n.handleClickProfile.bind(Object(v.a)(Object(v.a)(n))),n}return Object(d.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark(function e(){var t,n,a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.masq=new g.a("Search"),e.next=3,this.masq.init();case 3:return e.prev=3,e.next=6,this.masq.getProfiles();case 6:t=e.sent,this.setState({profiles:t}),e.next=23;break;case 10:return e.prev=10,e.t0=e.catch(3),e.next=14,this.masq.requestMasqAccess();case 14:return n=e.sent,a=n.link,this.setState({link:a}),e.next=19,this.masq.requestMasqAccessDone();case 19:return e.next=21,this.masq.getProfiles();case 21:r=e.sent,this.setState({profiles:r});case 23:case"end":return e.stop()}},e,this,[[3,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"onSearch",value:function(){var e=Object(u.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(this.state.items).concat([t]),e.prev=1,e.next=4,this.masq.put(t,"ok");case 4:this.setState({items:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0.message);case 10:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleClickProfile",value:function(){var e=Object(u.a)(l.a.mark(function e(t){var n,a,r,i=this;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,this.setState({currentProfile:t}),e.next=4,this.masq.setProfile(t.id);case 4:e.prev=4,n=this.masq._getDB(),e.next=18;break;case 8:return e.prev=8,e.t0=e.catch(4),e.next=12,this.masq.exchangeDataHyperdbKeys(j);case 12:return a=e.sent,r=a.link,window.open(r,"_blank"),e.next=17,this.masq.exchangeDataHyperdbKeysDone(j);case 17:n=this.masq._getDB();case 18:n.list("",function(e,t){e&&console.error(e);var n=t.map(function(e){return e[0].key});i.setState({items:n})});case 19:case"end":return e.stop()}},e,this,[[4,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.profiles,n=e.items,a=e.currentProfile,i=e.link;return r.a.createElement("div",{className:"App"},!t.length&&r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:i},"connect to masq"),r.a.createElement(q,{profiles:t,onClick:this.handleClickProfile}),a&&r.a.createElement("p",null,"Selected user: ",a.username),a&&r.a.createElement(y,{onSearch:this.onSearch,items:n}))}}]),t}(a.Component),E=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(173);o.a.render(r.a.createElement(O,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new window.URL("/masq-demos/search",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/masq-demos/search","/service-worker.js");E?(function(e){window.fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):x(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):x(e)})}}()},68:function(e,t,n){e.exports=n(175)},73:function(e,t,n){},89:function(e,t){},91:function(e,t){}},[[68,2,1]]]);
//# sourceMappingURL=main.c328ead1.chunk.js.map